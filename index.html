<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ì—…ë¬´í¬í„¸</title>

<style>
body{
font-family:Arial;
margin:0;
background:#f1f3f8;
}

header{
background:#2f54eb;
color:white;
padding:15px;
font-size:20px;
font-weight:bold;
}

.tabs{
display:flex;
flex-wrap:wrap;
background:white;
border-bottom:1px solid #ddd;
}

.tab{
padding:10px 16px;
cursor:pointer;
}

.tab.active{
background:#2f54eb;
color:white;
border-radius:6px;
margin:5px;
}

.container{
padding:20px;
display:grid;
grid-template-columns:repeat(auto-fill,minmax(160px,1fr));
gap:15px;
}

.card{
background:white;
border-radius:10px;
padding:20px;
cursor:pointer;
box-shadow:0 2px 5px rgba(0,0,0,0.1);
text-align:center;
}

.card:hover{
transform:translateY(-3px);
}

.icon{
font-size:30px;
margin-bottom:10px;
}
</style>
</head>
<body>

<header>ì—…ë¬´í¬í„¸</header>

<div class="tabs" id="tabs"></div>
<div class="container" id="cards"></div>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getFirestore, collection, addDoc, getDocs, deleteDoc, doc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";


const firebaseConfig = {
apiKey: "AIzaSyBzlQt0DyUdA7W3s7qzYjis6UUFA1b4RjqA",
authDomain: "open-7d88e.firebaseapp.com",
projectId: "open-7d88e",
storageBucket: "open-7d88e.firebasestorage.app",
messagingSenderId: "359782434518",
appId: "1:359782434518:web:22ba4a6bfc5b21a446b77"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const tabsDiv = document.getElementById("tabs");
const cardsDiv = document.getElementById("cards");

let categories = [];
let cards = [];

async function load(){

tabsDiv.innerHTML="";
cardsDiv.innerHTML="";

const catSnap = await getDocs(collection(db,"categories"));
categories = [];
catSnap.forEach(d=>categories.push({id:d.id,...d.data()}));

const cardSnap = await getDocs(collection(db,"cards"));
cards=[];
cardSnap.forEach(d=>cards.push({id:d.id,...d.data()}));

renderTabs();
renderCards("all");

}

function renderTabs(){

const all = document.createElement("div");
all.className="tab active";
all.innerText="ì „ì²´";
all.onclick=()=>{
setActive(all);
renderCards("all");
};
tabsDiv.appendChild(all);

categories.forEach(c=>{
const t=document.createElement("div");
t.className="tab";
t.innerText=c.name;
t.onclick=()=>{
setActive(t);
renderCards(c.name);
};
tabsDiv.appendChild(t);
});

}

function setActive(el){
document.querySelectorAll(".tab").forEach(t=>t.classList.remove("active"));
el.classList.add("active");
}

function renderCards(cat){

cardsDiv.innerHTML="";

cards
.filter(c=>cat==="all" || c.category===cat)
.forEach(c=>{

const div=document.createElement("div");
div.className="card";

div.innerHTML=`
<div class="icon">${c.icon||"ğŸ“„"}</div>
<div>${c.title}</div>
`;

div.onclick=()=>{
if(c.url) window.open(c.url,"_blank");
};

cardsDiv.appendChild(div);

});

}

load();

</script>

</body>
</html>
