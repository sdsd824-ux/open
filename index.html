<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>업무 포털</title>

<style>
body{
font-family:Arial;
background:#f1f3f6;
margin:0;
}

header{
text-align:center;
padding:30px;
}

.top-right{
position:absolute;
right:30px;
top:30px;
font-size:14px;
}

.login-box{
text-align:center;
margin-top:100px;
}

input{
padding:8px;
margin:5px;
}

button{
padding:8px 12px;
cursor:pointer;
}

.container{
width:1200px;
margin:auto;
}

.categories{
margin:20px 0;
}

.cat{
display:inline-block;
padding:6px 12px;
background:#ddd;
margin-right:5px;
cursor:pointer;
border-radius:6px;
}

.grid{
display:flex;
flex-wrap:wrap;
gap:20px;
}

.card{
width:200px;
background:white;
border-radius:10px;
padding:20px;
text-align:center;
box-shadow:0 2px 6px rgba(0,0,0,0.1);
cursor:pointer;
}

.card img{
width:40px;
height:40px;
}

.star{
position:absolute;
right:10px;
top:10px;
cursor:pointer;
}

.search{
margin-bottom:20px;
}

</style>
</head>

<body>

<div id="loginPage" class="login-box">
<h2>업무 포털 로그인</h2>
<input id="username" placeholder="이름">
<button onclick="login()">로그인</button>
</div>

<div id="main" style="display:none">

<header>
<h1>업무 포털</h1>
</header>

<div class="top-right" id="userInfo"></div>

<div class="container">

<input class="search" id="search" placeholder="검색">

<div class="categories" id="categories"></div>

<div class="grid" id="sites"></div>

</div>
</div>

<script>

let sites = JSON.parse(localStorage.getItem("sites")||"[]")
let categories = JSON.parse(localStorage.getItem("categories")||'["전체"]')

let currentCategory="전체"

function login(){
let name=document.getElementById("username").value
if(!name)return
localStorage.setItem("user",name)
start()
}

function start(){
let user=localStorage.getItem("user")
if(!user)return
document.getElementById("loginPage").style.display="none"
document.getElementById("main").style.display="block"
document.getElementById("userInfo").innerText="사용자 : "+user
drawCategories()
drawSites()
}

function drawCategories(){
let el=document.getElementById("categories")
el.innerHTML=""

categories.forEach(c=>{
let d=document.createElement("span")
d.className="cat"
d.innerText=c
d.onclick=()=>{
currentCategory=c
drawSites()
}
el.appendChild(d)
})
}

function drawSites(){

let search=document.getElementById("search").value?.toLowerCase()||""

let wrap=document.getElementById("sites")
wrap.innerHTML=""

sites
.filter(s=>{
if(currentCategory!="전체" && s.category!=currentCategory) return false
if(search && !s.name.toLowerCase().includes(search)) return false
return true
})
.forEach(s=>{

let card=document.createElement("div")
card.className="card"
card.onclick=()=>window.open(s.url)

card.innerHTML=`
<img src="${s.icon}">
<div>${s.name}</div>
<div style="font-size:12px;color:gray">${s.category}</div>
`

wrap.appendChild(card)

})

}

document.getElementById("search").oninput=drawSites

start()

</script>

</body>
</html>
