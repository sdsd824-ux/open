<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>Í¥ÄÎ¶¨Ïûê</title>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getFirestore, collection, addDoc, getDocs, deleteDoc, doc, updateDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

const firebaseConfig = {
const firebaseConfig = {
  apiKey: "AIzaSyBzUQt0DydA7W3s7qzYjis6UUFA1b4RjqA",
  authDomain: "open-7d88e.firebaseapp.com",
  projectId: "open-7d88e",
  storageBucket: "open-7d88e.firebasestorage.app",
  messagingSenderId: "359782434518",
  appId: "1:359782434518:web:22ba4a6bfcb5b21a446b77"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

window.db=db
window.col=collection

</script>

<style>
body{font-family:Arial;background:#f5f6fa;padding:40px;}
input,select{padding:10px;margin:5px 0;width:260px;}
button{padding:8px 14px;margin-left:5px;cursor:pointer;}
.row{background:white;padding:12px;margin-top:10px;border-radius:8px;display:flex;justify-content:space-between;}
</style>
</head>

<body>

<h2>ÏÇ¨Ïù¥Ìä∏ Ï∂îÍ∞Ä</h2>

<input id="name" placeholder="Ïù¥Î¶Ñ"><br>
<input id="url" placeholder="URL"><br>
<input id="icon" placeholder="ÏïÑÏù¥ÏΩò Ïòà: üåê"><br>
<input id="cat" placeholder="Ïπ¥ÌÖåÍ≥†Î¶¨"><br>

<button onclick="save()">Ï†ÄÏû•</button>

<h2>Î™©Î°ù</h2>
<div id="list"></div>

<script type="module">

import { getFirestore, collection, addDoc, getDocs, deleteDoc, doc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

const db = window.db

async function save(){

await addDoc(collection(db,"sites"),{
name:name.value,
url:url.value,
icon:icon.value,
category:cat.value
})

location.reload()

}

window.save=save

async function load(){

let snap=await getDocs(collection(db,"sites"))

snap.forEach(d=>{

let s=d.data()

let div=document.createElement("div")
div.className="row"

div.innerHTML=`
<div>${s.icon} ${s.name}</div>
<button onclick="del('${d.id}')">ÏÇ≠Ï†ú</button>
`

list.appendChild(div)

})

}

async function del(id){

await deleteDoc(doc(db,"sites",id))
location.reload()

}

window.del=del

load()

</script>

</body>
</html>
