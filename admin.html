<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ê´€ë¦¬ì</title>

<style>
body{
font-family:Arial;
background:#f5f6fa;
padding:40px;
}
input,select{
padding:10px;
margin:5px 0;
width:260px;
}
button{
padding:8px 14px;
margin-left:5px;
}
.row{
background:white;
padding:12px;
margin-top:10px;
border-radius:8px;
}
.icons span{
font-size:26px;
margin-right:10px;
cursor:pointer;
padding:4px;
border-radius:6px;
}
.icons span.active{
background:#2f80ed;
color:white;
}
</style>
</head>

<body>

<div id="loginBox">
<h2>ê´€ë¦¬ì ë¡œê·¸ì¸</h2>
<input type="password" id="pw">
<button onclick="login()">ì ‘ì†</button>
</div>

<div id="adminBox" style="display:none">
<h2>ì‚¬ì´íŠ¸ ì¶”ê°€</h2>

<input id="name" placeholder="ì‚¬ì´íŠ¸ ì´ë¦„"><br>
<input id="url" placeholder="URL"><br>

<select id="category"></select>
<div class="icons" id="icons"></div>
<br>
<button onclick="add()">ì¶”ê°€</button>

<h2>ì¹´í…Œê³ ë¦¬ ê´€ë¦¬</h2>
<input id="newCat" placeholder="ì¹´í…Œê³ ë¦¬ ì´ë¦„">
<button onclick="addCat()">ì¶”ê°€</button>
<div id="catList"></div>

<h2>ì‚¬ì´íŠ¸ ëª©ë¡</h2>
<div id="list"></div>
</div>

<script>

const PASSWORD="wlstjferladbstlr"

let picked="ğŸŒ"
const iconList=["ğŸŒ","ğŸ“Š","ğŸ¥","ğŸ“","â­","ğŸ’¬","ğŸ“…","ğŸ§¾"]

function login(){

const input=document.getElementById("pw").value

if(input===PASSWORD){

document.getElementById("loginBox").style.display="none"
document.getElementById("adminBox").style.display="block"

init()

}else{
alert("ë¹„ë°€ë²ˆí˜¸ í‹€ë¦¼")
}

}

function init(){

renderIcons()

let cats=JSON.parse(localStorage.getItem("cats")||'["ì „ì²´"]')

updateCatSelect(cats)
renderCatList(cats)
loadSites()

}

function renderIcons(){

let box=document.getElementById("icons")
box.innerHTML=""

iconList.forEach(i=>{

let s=document.createElement("span")
s.innerText=i

if(i===picked) s.classList.add("active")

s.onclick=()=>{
picked=i
renderIcons()
}

box.appendChild(s)

})

}

function add(){

let data=JSON.parse(localStorage.getItem("sites")||"[]")

data.push({
name:document.getElementById("name").value,
url:document.getElementById("url").value,
icon:picked,
category:document.getElementById("category").value
})

localStorage.setItem("sites",JSON.stringify(data))

loadSites()

}

function loadSites(){

let data=JSON.parse(localStorage.getItem("sites")||"[]")
let list=document.getElementById("list")
list.innerHTML=""

data.forEach((s,i)=>{

let d=document.createElement("div")
d.className="row"

d.innerHTML=`
${s.icon} ${s.name} (${s.category})
<button onclick="del(${i})">ì‚­ì œ</button>
`

list.appendChild(d)

})

}

function del(i){

let data=JSON.parse(localStorage.getItem("sites")||"[]")
data.splice(i,1)

localStorage.setItem("sites",JSON.stringify(data))
loadSites()

}

function addCat(){

let cats=JSON.parse(localStorage.getItem("cats")||'["ì „ì²´"]')
cats.push(document.getElementById("newCat").value)

localStorage.setItem("cats",JSON.stringify(cats))

init()

}

function renderCatList(cats){

let catList=document.getElementById("catList")
catList.innerHTML=""

cats.forEach((c,i)=>{

if(c==="ì „ì²´") return

let d=document.createElement("div")
d.className="row"

d.innerHTML=`
${c}
<button onclick="delCat(${i})">ì‚­ì œ</button>
`

catList.appendChild(d)

})

}

function delCat(i){

let cats=JSON.parse(localStorage.getItem("cats")||'["ì „ì²´"]')
cats.splice(i,1)

localStorage.setItem("cats",JSON.stringify(cats))

init()

}

function updateCatSelect(cats){

let select=document.getElementById("category")
select.innerHTML=""

cats.forEach(c=>{
let o=document.createElement("option")
o.text=c
select.add(o)
})

}

</script>

</body>
</html>
